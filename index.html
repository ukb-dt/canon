<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ukb-Canon — ϵ → ϵₜ Demo</title>
  <meta name="description" content="Ukb-Fractal panel demo (Soil→Canopy) with ϵ → ϵ_t animation" />
  <style>
    :root{color-scheme:dark}
    body{background:#06070a;color:#e8eefb;font-family:Inter,ui-sans-serif,system-ui,Segoe UI,Roboto,Helvetica,Arial,"Apple Color Emoji","Segoe UI Emoji";line-height:1.45;padding:28px}
    .card{max-width:980px;margin:28px auto;padding:1rem;border-radius:12px;border:1px solid rgba(255,255,255,0.04);background:linear-gradient(180deg, rgba(10,12,18,0.6), rgba(8,10,14,0.5));}
    table{width:100%;border-collapse:collapse;font-size:.95rem;color:inherit}
    th,td{padding:.6rem;border-bottom:1px dashed rgba(255,255,255,.03);text-align:left}
    th{border-bottom:1px solid rgba(255,255,255,.04);opacity:.9}
    .demo {padding:.5rem;border-radius:8px;border:1px solid rgba(255,255,255,.03);background:rgba(255,255,255,.01)}
    .btn{cursor:pointer;padding:.4rem .65rem;border-radius:8px;border:1px solid rgba(255,255,255,.06);background:transparent;color:inherit}
    .btn-primary{background:#2b334a}
    footer{font-size:.85rem;opacity:.75;margin-top:12px}
    @media (min-width:920px){ .grid-2{display:grid;grid-template-columns:1fr 380px;gap:1rem;align-items:start} }
  </style>
</head>
<body>
  <section class="card" id="ukb-canon">
    <header style="display:flex;align-items:baseline;gap:.75rem;margin-bottom:.5rem;">
      <h2 style="margin:0;font-size:1.05rem;">Ukb-Fractal — Enterprise Canon</h2>
      <small style="opacity:.7;margin-left:8px;">existential → operational • ϵ → ϵₜ</small>
    </header>

    <p style="margin:.25rem 0 1rem 0;opacity:.85;">
      Compact alignment of your enterprise phases with the ukb-fractal thermodynamic ladder.
      Suffering becomes memory when the noise term acquires time-structure: <strong>ϵ → ϵₜ</strong>.
    </p>

    <div class="grid-2">
      <!-- Table -->
      <div style="overflow:auto;">
        <table>
          <thead>
            <tr>
              <th>Ontology</th>
              <th>Calculus</th>
              <th>Enterprise Phase</th>
              <th>Aesthetic / Energy</th>
              <th style="text-align:right">Error</th>
            </tr>
          </thead>
          <tbody>
            <tr><td>Soil (θ′)</td><td>(x,y)</td><td>Existential</td><td>Suffering / Entropy</td><td style="text-align:right">ϵ</td></tr>
            <tr><td>Roots (θ)</td><td>y(x)</td><td>Tactical</td><td>Form / Tactic</td><td style="text-align:right">ϵ → ϵₜ</td></tr>
            <tr><td>Trunk (Σ)</td><td>dy/dx</td><td>Ritual</td><td>Style / Compression</td><td style="text-align:right">Gradient</td></tr>
            <tr><td>Branches (h(t))</td><td>d²y/dx²</td><td>Strategical</td><td>Drama / Acceleration</td><td style="text-align:right">Feedback</td></tr>
            <tr><td>Canopy (ΔS)</td><td>∫y dx</td><td>Operational</td><td>Beauty / Ledger</td><td style="text-align:right">∫(E+ϵₜ)dt</td></tr>
          </tbody>
        </table>
      </div>

      <!-- Visual / ϵ → ϵt demo -->
      <div class="demo" aria-hidden="false">
        <div style="font-weight:600;margin-bottom:.5rem;">ϵ → ϵₜ (micro demo)</div>
        <svg id="eps-demo" viewBox="0 0 360 140" width="100%" height="140" aria-hidden="true" style="background:transparent;">
          <line x1="20" y1="120" x2="340" y2="120" stroke="rgba(255,255,255,.06)" stroke-width="1"/>
          <g id="noise-points" fill="rgba(255,95,95,0.9)"></g>
          <path id="structured-path" d="" stroke="rgba(126,87,194,0.95)" stroke-width="2.4" fill="none" stroke-linecap="round" stroke-linejoin="round" opacity="0"></path>
          <text x="20" y="12" font-size="11" fill="rgba(255,255,255,.65)">time →</text>
          <text x="18" y="132" font-size="10" fill="rgba(255,255,255,.45)">amplitude</text>
        </svg>

        <div style="margin-top:.6rem;font-size:.88rem;opacity:.85;">
          <strong>Interpretation:</strong> raw shocks (red) become structured memory/feedback (purple) when the system encodes them across time — that’s ϵ → ϵₜ.
        </div>

        <div style="margin-top:.6rem;display:flex;gap:.5rem;">
          <button id="demo-replay" class="btn">Replay</button>
          <button id="demo-commit" class="btn btn-primary">Pin as Ledger</button>
        </div>
      </div>
    </div>

    <footer>Ukb-canon • entropy → grammar • yebo.</footer>
  </section>

  <script>
  (function(){
    function rand(range){ return Math.random()*range; }
    const noiseGroup = document.getElementById('noise-points');
    const structuredPath = document.getElementById('structured-path');
    const replayBtn = document.getElementById('demo-replay');

    function drawNoise(){
      noiseGroup.innerHTML = '';
      const n = 22;
      for(let i=0;i<n;i++){
        const x = 20 + (i/(n-1))*(320);
        const y = 45 + rand(70);
        const c = document.createElementNS('http://www.w3.org/2000/svg','circle');
        c.setAttribute('cx', x);
        c.setAttribute('cy', y);
        c.setAttribute('r', 3 + Math.random()*2);
        c.setAttribute('fill', 'rgba(255,95,95,0.85)');
        c.setAttribute('opacity', 0.95 - Math.random()*0.4);
        noiseGroup.appendChild(c);
      }
    }

    function buildStructuredPath(){
      const n = 12;
      const pts = [];
      for(let i=0;i<n;i++){
        const x = 20 + (i/(n-1))*320;
        const y = 70 + 18*Math.sin(i*1.3 + Date.now()/1200) + 6*Math.cos(i*0.7);
        pts.push([x, y]);
      }
      let d = '';
      for(let i=0;i<pts.length;i++){
        const p = pts[i];
        if(i===0) d += `M ${p[0]} ${p[1]} `;
        else {
          const prev = pts[i-1];
          const midx = (prev[0]+p[0])/2;
          const midy = (prev[1]+p[1])/2;
          d += `Q ${prev[0]} ${prev[1]} ${midx} ${midy} `;
        }
      }
      const last = pts[pts.length-1];
      d += `T ${last[0]} ${last[1]}`;
      return d;
    }

    function animateToStructured(){
      structuredPath.setAttribute('d', buildStructuredPath());
      structuredPath.style.transition = `opacity 900ms ease-in-out, stroke-dashoffset 900ms linear`;
      structuredPath.style.opacity = 1;
      const len = structuredPath.getTotalLength ? structuredPath.getTotalLength() : 800;
      structuredPath.style.strokeDasharray = len;
      structuredPath.style.strokeDashoffset = len;
      requestAnimationFrame(()=> { structuredPath.style.strokeDashoffset = 0; });
      Array.from(noiseGroup.children).forEach((c, idx) => {
        c.style.transition = `opacity 900ms ease-in-out, transform 900ms ease`;
        c.style.opacity = 0.08;
        c.style.transform = `translateY(${10 + Math.random()*8}px)`;
      });
    }

    drawNoise();
    structuredPath.style.opacity = 0;
    setTimeout(()=>{ animateToStructured(); }, 600);

    replayBtn.addEventListener('click', () => {
      drawNoise();
      setTimeout(() => animateToStructured(), 220);
    });

    // demo-commit placeholder: hook to any behavior you like
    document.getElementById('demo-commit').addEventListener('click', () => {
      alert('Pin as Ledger clicked — hook this to your ledger logic.');
    });

    // periodic refresh for liveliness
    setInterval(()=>{ drawNoise(); animateToStructured(); }, 7000);
  })();
  </script>
</body>
</html>
